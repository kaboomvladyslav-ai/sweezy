"use client"\nimport { useQuery } from '@tanstack/react-query'\nimport { News } from '@/lib/types'\nimport Card from '@/components/Card'\nimport NewsEditorDialog from './NewsEditorDialog'\n\nasync function fetchNews(): Promise<News[]> {\n  const res = await fetch('/api/news', { cache: 'no-store' })\n  if (!res.ok) return []\n  return res.json()\n}\n\nexport default function NewsList() {\n  const { data = [], isLoading, refetch } = useQuery({ queryKey: ['news'], queryFn: fetchNews })\n\n  const onDelete = async (id: string) => {\n    const res = await fetch(`/api/news/${id}`, { method: 'DELETE' })\n    if (res.ok) refetch()\n  }\n\n  return (\n    <Card>\n      <div className=\"flex items-center justify-between mb-3\">\n        <div className=\"text-sm opacity-70\">Total: {data.length}</div>\n        <NewsEditorDialog trigger={<button className=\"glass px-3 py-2 rounded-lg\">Create</button>} />\n      </div>\n      <div className=\"overflow-x-auto rounded-xl border border-white/10 bg-white/5 backdrop-blur-md shadow-soft\">\n        <table className=\"min-w-full text-sm\">\n          <thead className=\"text-left opacity-70 border-b border-white/10\">\n            <tr>\n              <th className=\"py-3 px-4\">Title</th>\n              <th className=\"py-3 px-4\">Source</th>\n              <th className=\"py-3 px-4\">Date</th>\n              <th className=\"py-3 px-4\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {isLoading ? (\n              <tr><td className=\"py-6 text-center opacity-70\" colSpan={4}>Loadingâ€¦</td></tr>\n            ) : data.length === 0 ? (\n              <tr><td className=\"py-6 text-center opacity-70\" colSpan={4}>No news yet</td></tr>\n            ) : (\n              data.map(item => (\n                <tr key={item.id} className=\"border-t border-white/5 hover:bg-white/5 transition-colors\">\n                  <td className=\"py-3 px-4\">{item.title}</td>\n                  <td className=\"py-3 px-4\">{item.source}</td>\n                  <td className=\"py-3 px-4\">{new Date(item.published_at).toLocaleDateString()}</td>\n                  <td className=\"py-3 px-4 flex gap-2\">\n                    <NewsEditorDialog news={item} trigger={<button className=\"glass px-2 py-1 rounded\">Edit</button>} />\n                    <button onClick={() => onDelete(item.id)} className=\"glass px-2 py-1 rounded text-red-400\">Delete</button>\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n    </Card>\n  )\n}\n\n*** End Patch```  %}

